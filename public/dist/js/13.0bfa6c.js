(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{287:function(e,t,n){"use strict";var r=n(44);n.n(r).a},288:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".folder[data-v-3deed0af]:hover {\n  cursor: pointer;\n  background: #E0E0E0;\n}\n.image[data-v-3deed0af]:hover {\n  cursor: pointer;\n  border: 2px solid #9ACD32;\n}\n#preview[data-v-3deed0af] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1em;\n}\n#preview img[data-v-3deed0af] {\n  max-width: 50%;\n  max-height: 200px;\n}\n.unselectable[data-v-3deed0af] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}",""])},289:function(e,t,n){"use strict";var r=n(45);n.n(r).a},290:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".folder[data-v-1cfc6c7b]:hover {\n  cursor: pointer;\n  background: #E0E0E0;\n}\n.image[data-v-1cfc6c7b]:hover {\n  cursor: pointer;\n  border: 2px solid #9ACD32;\n}\n#preview[data-v-1cfc6c7b] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1em;\n}\n#preview img[data-v-1cfc6c7b] {\n  max-width: 50%;\n  max-height: 200px;\n}\n.unselectable[data-v-1cfc6c7b] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}",""])},291:function(e,t,n){"use strict";var r=n(46);n.n(r).a},292:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".image[data-v-5fbba8c7]:hover {\n  cursor: pointer;\n  border: 2px solid #9ACD32;\n}\n#preview[data-v-5fbba8c7] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: 1em;\n}\n#preview img[data-v-5fbba8c7] {\n  max-width: 50%;\n  max-height: 200px;\n}\n.unselectable[data-v-5fbba8c7] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}",""])},293:function(e,t,n){"use strict";var r=n(47);n.n(r).a},294:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,".icon[data-v-1337ab33]:hover {\n  cursor: pointer;\n}",""])},295:function(e,t,n){"use strict";var r=n(48);n.n(r).a},296:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"#textBox[data-v-a2f27a72] {\n  width: 100%;\n  height: 350px;\n  border: 6px double #6e6e6e;\n  padding: 12px;\n  overflow: scroll;\n}\n#textBox #sourceText[data-v-a2f27a72] {\n  padding: 0;\n  margin: 0;\n  min-width: 498px;\n  min-height: 200px;\n}\n.overlay[data-v-a2f27a72] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100%;\n  width: 100%;\n  opacity: 0;\n  transition: 0.5s ease;\n  background-color: #008cba;\n}\n[data-v-a2f27a72] #textBox img:hover {\n  cursor: pointer;\n  opacity: 0.5;\n  transition: 0.5s ease;\n  background-color: #9ACD32;\n}\n[data-v-a2f27a72] #textBox .link {\n  color: #2c5cad;\n}\n[data-v-a2f27a72] #textBox .link:hover {\n  color: #1c3c70;\n  text-decoration: underline;\n}\n#editMode label[data-v-a2f27a72] {\n  cursor: pointer;\n}\n.intLink[data-v-a2f27a72] {\n  cursor: pointer;\n}\nimg.intLink[data-v-a2f27a72] {\n  border: 1px solid #000;\n}\n.disabled[data-v-a2f27a72]:hover {\n  cursor: not-allowed;\n  color: #000;\n}\npre[data-v-a2f27a72] {\n  overflow-x: auto;\n  white-space: pre-wrap;\n  white-space: -moz-pre-wrap;\n  white-space: -pre-wrap;\n  white-space: -o-pre-wrap;\n  word-wrap: break-word;\n}",""])},44:function(e,t,n){var r=n(288);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},45:function(e,t,n){var r=n(290);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},46:function(e,t,n){var r=n(292);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},47:function(e,t,n){var r=n(294);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},48:function(e,t,n){var r=n(296);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(7)(r,o);r.locals&&(e.exports=r.locals)},72:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(8),s=n.n(a),i=n(3),c=n.n(i),l=n(14);function u(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){u(a,r,o,s,i,"next",e)}function i(e){u(a,r,o,s,i,"throw",e)}s(void 0)})}}var m={created:function(){var e=d(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=d(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.commit("loading/SET_LOADING",!0),console.log("FilesModal mounted!"),e.next=5,c.a.get("/api/images");case 5:t=e.sent,n=t.data,console.log("data: ",n),this.files=n.files,this.folders=n.rootDirectories,this.path=[{name:"Dossier Racine",folder:"/",active:!0}],this.$store.commit("loading/SET_LOADING",!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),this.$store.commit("loading/SET_LOADING",!1);case 17:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),data:function(){return{formNewImage:new s.a({image:null,path:""}),formNewFolder:new s.a({name:"",fileType:"images",path:""}),showSidebar:!1,selectedFolder:null,selectedFile:null,files:[],folders:[],path:[],selectedImageHeight:null,selectedImageWidth:null,url:null,clickCount:0,clickTimer:null,tabIndex:1,uploadReady:!0}},computed:{loading:function(){return this.$store.getters["loading/loading"]},currentPath:function(){return this.path.map(function(e){return e.name}).filter(function(e){return"Dossier Racine"!==e}).join("/")}},methods:{onFileChange:function(e){var t=e.target.files[0];this.url=URL.createObjectURL(t),this.formNewImage.image=t},selectFolder:function(e){console.log("selectFolder: ",e),this.selectedFile=null,this.showSidebar=!0,this.selectedFolder=e},selectFile:function(e){console.log("selectFile: ",e),this.selectedFolder=null,this.showSidebar=!0,this.selectedFile=e},clearFileInput:function(){var e=this;this.uploadReady=!1,this.$nextTick(function(){e.uploadReady=!0})},insertImage:function(e){console.log("insertImage: ",e),this.$emit("insertImage",e),this.showSidebar=!1,this.$bvModal.hide("imagesModal")},onImageLoad:function(e){console.log("onImageLoad: ",e);var t=this.$refs.selectedImage;console.log("naturalWidth: ",t.naturalWidth),console.log("naturalHeight: ",t.naturalHeight),this.selectedImageWidth=t.naturalWidth,this.selectedImageHeight=t.naturalHeight},formatFileName:function(e){var t=e.lastIndexOf("/");return e.substring(t+1)},handleClick:function(e){var t=this;if(this.clickCount++,1===this.clickCount){this.clickTimer=setTimeout(function(){console.log("Click!"),t.clickCount=0,t.selectFolder(e)},200)}else clearTimeout(this.clickTimer),console.log("Double click!"),this.clickCount=0,this.navigateToFolder(e)},navigateToFolder:function(e){console.log("navigateToFolder: ",e),this.tabIndex=0,this.openFolder(e)},openFolder:function(){var e=d(o.a.mark(function e(t){var n,r,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("openFolder: ",t),e.next=3,c.a.post("/api/images/folder/images",{folder:t});case 3:n=e.sent,r=n.data,console.log("data: ",r),this.folders=r.folders,this.files=r.files,this.path=[],this.path.push({name:"Dossier Racine",folder:"/"}),r.folder&&r.folder.split("/").forEach(function(e){e&&a.path.push({name:e,active:!1,folder:e})}),this.path[this.path.length-1].active=!0;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createNewFolder:function(){var e=d(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.formNewFolder.path=this.currentPath,e.next=4,this.formNewFolder.submit("post","/api/images/folder",{transformRequest:[function(e,t){return Object(l.a)(e)}]});case 4:t=e.sent,n=t.data,console.log("data: ",n),this.navigateToFolder(this.formNewFolder.path),this.formNewFolder.name="",this.$noty.success("Le dossier a été créé avec succès."),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Une erreur s'est produite et le dossier n'a pas pu être créé.");case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),uploadImage:function(){var e=d(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("this.formNewImage: ",this.formNewImage),this.$store.commit("loading/SET_LOADING",!0),this.formNewImage.path=this.currentPath,e.next=6,this.formNewImage.submit("post","/api/images",{transformRequest:[function(e,t){return Object(l.a)(e)}]});case 6:t=e.sent,n=t.data,console.log("data: ",n),this.clearFileInput,this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Image ajoutée avec succès."),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("error: ",e.t0),this.$store.commit("loading/SET_LOADING",!1),this.$noty.error("Une erreur est survenue et l'image n'a pas pu être uploadée.");case 19:case"end":return e.stop()}},e,this,[[0,14]])}));return function(){return e.apply(this,arguments)}}(),deleteImage:function(){var e=d(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleteImage: ",t),e.next=4,c.a.post("/api/images/delete",{fileName:t});case 4:return e.next=6,this.openFolder(this.currentPath);case 6:this.showSidebar=!1,this.$noty.success("L'image a été supprimée avec succès."),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.$noty.error("Une erreur s'est produite et l'image n'a pas pu être supprimée."),console.log("error: ",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),deleteFolder:function(){var e=d(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleteFolder"),e.next=4,c.a.post("/api/images/folder/delete",{folderName:this.selectedFolder});case 4:return t=e.sent,n=t.data,console.log("data: ",n),e.next=9,this.openFolder(this.currentPath);case 9:this.showSidebar=!1,this.$noty.success("Le dossier a été supprimé avec succès."),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Une erreur s'est produite et le dossier n'a pas pu être supprimé.");case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),closeModal:function(){console.log("closeModal"),this.$emit("closeImagesModal",!1),this.$bvModal.hide("imagesModal")}}},f=(n(287),n(2)),p=Object(f.a)(m,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"xl",id:"imagesModal","ok-disabled":"","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.closeModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("span",{staticClass:"unselectable"},[e._v("Gestion des images")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"md"},on:{click:e.closeModal}},[e._v("\n                Fermer\n            ")])],1)]},proxy:!0}])},[e._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("b-tab",{attrs:{title:"Gallerie d'images",active:""}},[n("b-sidebar",{attrs:{"aria-controls":"details",shadow:""},scopedSlots:e._u([{key:"title",fn:function(){return[n("div",{staticClass:"text-center unselectable"},[n("h3",{},[e._v("Détails")])])]},proxy:!0},{key:"footer",fn:function(t){var r=t.hide;return[n("div",{staticClass:"d-flex bg-dark text-light justify-content-center align-items-center px-3 py-2"},[n("b-button",{attrs:{size:"sm"},on:{click:r}},[e._v("Fermer")])],1)]}}]),model:{value:e.showSidebar,callback:function(t){e.showSidebar=t},expression:"showSidebar"}},[e._v(" "),e.selectedFile?n("div",{staticClass:"px-3 py-2 unselectable"},[n("b-img",{ref:"selectedImage",staticClass:"mb-3",attrs:{src:"/images/"+e.selectedFile[0],fluid:"",thumbnail:""},on:{load:e.onImageLoad}}),e._v(" "),n("p",{staticClass:"text-dark"},[e._v("\n                        Taille: "),n("b",[e._v(e._s(e.selectedFile[2]/1e3)+" Ko")]),n("br"),e._v("\n                        Dernière modification: "),n("b",[e._v(e._s(e._f("moment")(e.selectedFile[3],"DD-MM-YYYY HH:mm")))]),n("br"),e._v("\n                        Largeur: "),n("b",[e._v(e._s(e.selectedImageWidth)+" px")]),n("br"),e._v("\n                        Hauteur: "),n("b",[e._v(e._s(e.selectedImageHeight)+" px")])]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{staticClass:"my-2",attrs:{variant:"primary"},on:{click:function(t){return e.insertImage(e.selectedFile[0])}}},[e._v("Insérer Image")]),n("br"),e._v(" "),n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.deleteImage(e.selectedFile[0])}}},[e._v("Supprimer")])],1)],1):e._e(),e._v(" "),e.selectedFolder?n("div",{staticClass:"px-3 py-2"},[n("b-img",{attrs:{src:"/images/icons/folder.png",fluid:""}}),e._v(" "),n("p",{staticClass:"text-dark text-center",staticStyle:{"word-break":"break-word"}},[e._v("\n                        "+e._s(e.selectedFolder)+"\n                    ")]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:e.deleteFolder}},[e._v("Supprimer")])],1)],1):e._e()]),e._v(" "),n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),e.loading?n("b-row",{staticClass:"justify-content-center",staticStyle:{height:"15em"},attrs:{"align-v":"center"}},[n("b-spinner",{attrs:{type:"grow",label:"Loading..."}})],1):n("b-row",{staticClass:"justify-content-start my-3"},[e._l(e.folders,function(t,r){return n("b-col",{key:"folder_"+r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.handleClick(t)}}},[n("b-img",{staticClass:"folder",attrs:{fluid:"",src:"/images/icons/folder.png"}}),e._v(" "),n("p",{staticClass:"text-center",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatFileName(t)))])],1)}),e._v(" "),e._l(e.files,function(t,r){return n("b-col",{key:"file_"+r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.selectFile(t)}}},[n("b-img",{staticClass:"image",attrs:{thumbnail:"",fluid:"",src:"/images/"+t[0]}}),e._v(" "),n("p",{staticClass:"text-center",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatFileName(t[0])))])],1)})],2)],1),e._v(" "),n("b-tab",{attrs:{title:"Uploader une image"}},[n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[n("b-form-file",{class:{"is-invalid":e.formNewImage.errors.has("image")},attrs:{accept:".jpg, .png, .gif",placeholder:"Choisir un fichier...","drop-placeholder":"Placer le fichier ici..."},on:{change:e.onFileChange}}),e._v(" "),n("has-error",{attrs:{form:e.formNewImage,field:"image"}}),e._v(" "),n("div",{attrs:{id:"preview"}},[e.url?n("img",{attrs:{src:e.url}}):e._e()])],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{staticClass:"mx-2",attrs:{variant:"dark",size:"sm"},on:{click:e.clearFileInput}},[e._v("Effacer")]),e._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.uploadImage(t)}}},[e._v("Uploader")])],1)],1),e._v(" "),n("b-tab",{attrs:{title:"Ajouter dossier"}},[n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[n("b-form-group",{attrs:{label:"Nom du dossier:","label-for":"name"}},[n("b-form-input",{class:{"is-invalid":e.formNewFolder.errors.has("name")},attrs:{id:"folderName",name:"name"},model:{value:e.formNewFolder.name,callback:function(t){e.$set(e.formNewFolder,"name",t)},expression:"formNewFolder.name"}}),e._v(" "),n("has-error",{attrs:{form:e.formNewFolder,field:"name"}})],1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.createNewFolder(t)}}},[e._v("Créer dossier")])],1)],1)],1)],1)},[],!1,null,"3deed0af",null).exports;function h(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){h(a,r,o,s,i,"next",e)}function i(e){h(a,r,o,s,i,"throw",e)}s(void 0)})}}var v={created:function(){var e=g(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("DocumentsModal mounted!"),e.next=3,c.a.get("/api/documents");case 3:t=e.sent,n=t.data,console.log("data: ",n),this.files=n.files,this.folders=n.rootDirectories,this.path=[{name:"Dossier Racine",folder:"/",active:!0}];case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=g(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{formNewDocument:new s.a({document:null,path:""}),formNewFolder:new s.a({name:"",fileType:"images",path:""}),files:[],folders:[],path:[],showSidebar:!1,selectedFolder:null,selectedFile:null,clickCount:0,clickTimer:null,tabIndex:1,uploadReady:!0}},computed:{loading:function(){return this.$store.getters["loading/loading"]},currentPath:function(){return this.path.map(function(e){return e.name}).filter(function(e){return"Dossier Racine"!==e}).join("/")}},methods:{onFileChange:function(e){var t=e.target.files[0];this.url=URL.createObjectURL(t),this.formNewDocument.document=t},selectFolder:function(e){console.log("selectFolder: ",e),this.selectedFile=null,this.showSidebar=!0,this.selectedFolder=e},selectFile:function(e){console.log("selectFile: ",e),this.selectedFolder=null,this.showSidebar=!0,this.selectedFile=e},clearFileInput:function(){var e=this;this.uploadReady=!1,this.$nextTick(function(){e.uploadReady=!0})},insertDocument:function(e,t){var n=this.formatRemoveFileExtension(e);console.log("insertDocument: ",e,t,n),this.$emit("closeDocumentsModal",!1),this.$emit("insertDocument",e,t,n),this.showSidebar=!1,this.$bvModal.hide("filesModal")},formatFileName:function(e){var t=e.lastIndexOf("/");return e.substring(t+1)},formatRemoveFileExtension:function(e){var t=e.lastIndexOf(".");return e.substring(0,t)},handleClick:function(e){var t=this;if(this.clickCount++,1===this.clickCount){this.clickTimer=setTimeout(function(){console.log("Click!"),t.clickCount=0,t.selectFolder(e)},200)}else clearTimeout(this.clickTimer),console.log("Double click!"),this.clickCount=0,this.navigateToFolder(e)},navigateToFolder:function(e){console.log("navigateToFolder: ",e),this.tabIndex=0,this.openFolder(e)},uploadDocument:function(){var e=g(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("this.formNewDocument: ",this.formNewDocument),this.$store.commit("loading/SET_LOADING",!0),this.formNewDocument.path=this.currentPath,e.next=6,this.formNewDocument.submit("post","/api/documents",{transformRequest:[function(e,t){return Object(l.a)(e)}]});case 6:t=e.sent,n=t.data,console.log("data2: ",n),this.files.unshift(n.newDocumentArray),this.clearFileInput,this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Document ajouté avec succès."),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Nous sommes désolés. Une erreur est survenue et le document n'a pas pu être uploadé."),this.$store.commit("loading/SET_LOADING",!1);case 20:case"end":return e.stop()}},e,this,[[0,15]])}));return function(){return e.apply(this,arguments)}}(),openFolder:function(){var e=g(o.a.mark(function e(t){var n,r,a=this;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("openFolder: ",t),e.next=3,c.a.post("/api/documents/folder/documents",{folder:t});case 3:n=e.sent,r=n.data,console.log("data: ",r),this.folders=r.folders,this.files=r.files,this.path=[],this.path.push({name:"Dossier Racine",folder:"/"}),r.folder&&r.folder.split("/").forEach(function(e){e&&a.path.push({name:e,active:!1,folder:e})}),this.path[this.path.length-1].active=!0;case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),createNewFolder:function(){var e=g(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.formNewFolder.path=this.currentPath,e.next=4,this.formNewFolder.submit("post","/api/documents/folder",{transformRequest:[function(e,t){return Object(l.a)(e)}]});case 4:t=e.sent,n=t.data,console.log("data: ",n),this.navigateToFolder(this.formNewFolder.path),this.formNewFolder.name="",this.$noty.success("Le dossier a été créé avec succès."),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Une erreur s'est produite et le dossier n'a pas pu être créé.");case 16:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}(),deleteDocument:function(){var e=g(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleteDocument: ",t),e.next=4,c.a.post("/api/documents/delete",{fileName:t});case 4:return e.next=6,this.openFolder(this.currentPath);case 6:this.showSidebar=!1,this.$noty.success("Le document a été supprimé avec succès."),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.$noty.error("Une erreur s'est produite et le document n'a pas pu être supprimé."),console.log("error: ",e.t0);case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),deleteFolder:function(){var e=g(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("deleteFolder"),e.next=4,c.a.post("/api/documents/folder/delete",{folderName:this.selectedFolder});case 4:return t=e.sent,n=t.data,console.log("data: ",n),e.next=9,this.openFolder(this.currentPath);case 9:this.showSidebar=!1,this.$noty.success("Le dossier a été supprimé avec succès."),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("error: ",e.t0),this.$noty.error("Une erreur s'est produite et le dossier n'a pas pu être supprimé.");case 17:case"end":return e.stop()}},e,this,[[0,13]])}));return function(){return e.apply(this,arguments)}}(),closeModal:function(){console.log("closeModal"),this.$emit("closeDocumentsModal",!1),this.$bvModal.hide("documentsModal")}}},b=(n(289),Object(f.a)(v,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"xl",id:"documentsModal","ok-disabled":"","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.closeModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("span",{staticClass:"unselectable"},[e._v("Gestion des documents")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("div",{staticClass:"w-100"},[n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"md"},on:{click:e.closeModal}},[e._v("\n                Fermer\n            ")])],1)]},proxy:!0}])},[e._v(" "),n("b-tabs",{attrs:{"content-class":"mt-3"},model:{value:e.tabIndex,callback:function(t){e.tabIndex=t},expression:"tabIndex"}},[n("b-tab",{attrs:{title:"Documents",active:""}},[n("b-sidebar",{staticClass:"unselectable",attrs:{"aria-controls":"details",title:"Détails",shadow:"",width:"380px"},scopedSlots:e._u([{key:"footer",fn:function(t){var r=t.hide;return[n("div",{staticClass:"d-flex bg-dark text-light justify-content-center align-items-center px-3 py-2"},[n("b-button",{attrs:{size:"sm"},on:{click:r}},[e._v("Fermer")])],1)]}}]),model:{value:e.showSidebar,callback:function(t){e.showSidebar=t},expression:"showSidebar"}},[e.selectedFile?n("div",{staticClass:"px-3 py-2 text-white"},[n("div",{staticClass:"text-center"},[n("b-img",{ref:"selectedImage",staticClass:"mb-3",attrs:{src:"/images/icons/pdf-icon.png",fluid:"",thumbnail:""}})],1),e._v(" "),n("p",{staticClass:"text-dark"},[e._v("\n                        Nom: "),n("b",[e._v(e._s(e.selectedFile[0]))]),n("br"),e._v("\n                        Type: "),n("b",[e._v(e._s(e.formatFileName(e.selectedFile[1])))]),n("br"),e._v("\n                        Taille: "),n("b",[e._v(e._s(e.selectedFile[2]/1e3)+" Ko")]),n("br"),e._v("\n                        Dernière modification: "),n("b",[e._v(e._s(e._f("moment")(e.selectedFile[3],"DD-MM-YYYY HH:mm")))]),n("br")]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{staticClass:"my-2",attrs:{variant:"primary"},on:{click:function(t){return e.insertDocument(e.selectedFile[0],e.selectedFile[1])}}},[e._v("Insérer document")]),n("br"),e._v(" "),n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:function(t){return e.deleteDocument(e.selectedFile[0])}}},[e._v("Supprimer")])],1)]):e._e(),e._v(" "),e.selectedFolder?n("div",{staticClass:"px-3 py-2"},[n("b-img",{attrs:{src:"/images/icons/folder.png",fluid:""}}),e._v(" "),n("p",{staticClass:"text-dark text-center",staticStyle:{"word-break":"break-word"}},[e._v("\n                        "+e._s(e.selectedFolder)+"\n                    ")]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{attrs:{variant:"danger",size:"sm"},on:{click:e.deleteFolder}},[e._v("Supprimer")])],1)],1):e._e()]),e._v(" "),n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[e._l(e.folders,function(t,r){return n("b-col",{key:"folder_"+r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.handleClick(t)}}},[n("b-img",{staticClass:"folder",attrs:{fluid:"",src:"/images/icons/folder.png"}}),e._v(" "),n("p",{staticClass:"text-center",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatFileName(t)))])],1)}),e._v(" "),e._l(e.files,function(t,r){return n("b-col",{key:r,attrs:{cols:"6",md:"3",lg:"2"},on:{click:function(n){return e.selectFile(t)}}},[n("b-img",{staticClass:"image",attrs:{thumbnail:"",fluid:"",src:"/images/icons/pdf-icon.png"}}),e._v(" "),n("p",{staticClass:"text-center unselectable",staticStyle:{"word-break":"break-word"}},[e._v(e._s(e.formatFileName(t[0])))])],1)})],2)],1),e._v(" "),n("b-tab",{attrs:{title:"Uploader un document"}},[n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[e.uploadReady?n("b-form-file",{class:{"is-invalid":e.formNewDocument.errors.has("document")},attrs:{accept:".pdf",placeholder:"Choisir un fichier...","drop-placeholder":"Placer le fichier ici..."},on:{change:e.onFileChange}}):e._e(),e._v(" "),n("has-error",{attrs:{form:e.formNewDocument,field:"document"}})],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{staticClass:"mx-2",attrs:{variant:"dark",size:"sm"},on:{click:e.clearFileInput}},[e._v("Effacer")]),e._v(" "),n("b-button",{attrs:{variant:"primary",disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.uploadDocument(t)}}},[e.loading?n("b-spinner",{attrs:{small:"",type:"grow"}}):e._e(),e._v(" Uploader")],1)],1)],1),e._v(" "),n("b-tab",{attrs:{title:"Ajouter dossier"}},[n("b-row",{staticClass:"justify-content-start my-3"},[n("b-col",{attrs:{cols:"12"}},[n("b-breadcrumb",e._l(e.path,function(t,r){return n("b-breadcrumb-item",{key:"breadcrumb_"+r,attrs:{active:t.active},on:{click:function(n){return e.navigateToFolder(t.folder)}}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-col",{attrs:{cols:"12",md:"6",lg:"4"}},[n("b-form-group",{attrs:{label:"Nom du dossier:","label-for":"name"}},[n("b-form-input",{class:{"is-invalid":e.formNewFolder.errors.has("name")},attrs:{id:"folderName",name:"name"},model:{value:e.formNewFolder.name,callback:function(t){e.$set(e.formNewFolder,"name",t)},expression:"formNewFolder.name"}}),e._v(" "),n("has-error",{attrs:{form:e.formNewFolder,field:"name"}})],1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-3"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return t.preventDefault(),e.createNewFolder(t)}}},[e._v("Créer dossier")])],1)],1)],1)],1)},[],!1,null,"1cfc6c7b",null).exports);function w(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function x(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){w(a,r,o,s,i,"next",e)}function i(e){w(a,r,o,s,i,"throw",e)}s(void 0)})}}var k={props:["selectedText"],created:function(){var e=x(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=x(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(Object.keys(this.$store.getters["pages/pages"]).length<=2)){e.next=4;break}return e.next=4,this.$store.dispatch("pages/fetchPages");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error: ",e.t0);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),data:function(){return{pageLink:{},linkType:"external",linkPage:{internal:{},external:"http://google.ch"},linkOptions:[{text:"Interne",value:"internal"},{text:"Externe",value:"external"}]}},computed:{loading:function(){return this.$store.getters["loading/loading"]},pages:function(){return this.$store.getters["pages/pages"]},pagesArray:function(){var e=[];for(var t in this.pages)this.pages.hasOwnProperty(t)&&null!=this.pages[t]&&e.push(this.pages[t]);return e}},methods:{insertLink:function(){console.log("linkPage: ",this.linkType,this.linkPage),this.$emit("insertLink",{linkType:this.linkType,linkPage:this.linkPage}),this.$bvModal.hide("createLinkModal")},closeModal:function(){console.log("closeModal"),this.$emit("closeLinkModal",!1),this.$bvModal.hide("createLinkModal")}}},y=(n(291),Object(f.a)(k,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{size:"md",id:"createLinkModal",title:"Créer un lien","ok-disabled":"","no-close-on-esc":"","no-close-on-backdrop":""},on:{close:e.closeModal},scopedSlots:e._u([{key:"modal-title",fn:function(){return[n("span",{staticClass:"unselectable"},[e._v("Lien")])]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-row",{},[n("b-button",{staticClass:"float-right mr-2",attrs:{variant:"dark",size:"md"},on:{click:e.closeModal}},[e._v("\n                Fermer\n            ")]),e._v(" "),n("b-button",{staticClass:"float-right",attrs:{variant:"primary",size:"md"},on:{click:e.insertLink}},[e._v("\n                Insérer\n            ")])],1)]},proxy:!0}])},[e._v(" "),n("b-form-group",{attrs:{label:"Sélectionner type de lien","label-for":"linkType"}},[n("b-form-radio-group",{attrs:{options:e.linkOptions,name:"linkType"},model:{value:e.linkType,callback:function(t){e.linkType=t},expression:"linkType"}})],1),e._v(" "),"internal"===e.linkType?n("b-form-group",{attrs:{label:"Lien interne:"}},[n("b-form-select",{model:{value:e.linkPage.internal,callback:function(t){e.$set(e.linkPage,"internal",t)},expression:"linkPage.internal"}},e._l(e.pagesArray,function(t){return n("option",{key:t.id,domProps:{value:{id:t.id,name:t.name,slug:t.slug}}},[e._v(e._s(t.name))])}),0)],1):n("b-form-group",{attrs:{label:"Lien externe:","label-for":"externalLink"}},[n("b-form-input",{attrs:{id:"externalLink",name:"externalLink",placeholder:"http://google.ch"},model:{value:e.linkPage.external,callback:function(t){e.$set(e.linkPage,"external",t)},expression:"linkPage.external"}})],1)],1)},[],!1,null,"5fbba8c7",null).exports);function _(e,t,n,r,o,a,s){try{var i=e[a](s),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function I(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){_(a,r,o,s,i,"next",e)}function i(e){_(a,r,o,s,i,"throw",e)}s(void 0)})}}var C={props:["selectedImageProps"],created:function(){var e=I(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=I(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{showImagePropertiesSidebar:!0,keepImageProportions:!0,format:this.selectedImageProps.width/this.selectedImageProps.height}},computed:{},methods:{updateSelectedImage:function(e,t){"width"===t&&(this.keepImageProportions?(this.$emit("updateSelectedImageProperties",e,"width"),this.selectedImageProps.height=Math.round(this.selectedImageProps.width/this.format),this.$emit("updateSelectedImageProperties",this.selectedImageProps.height,"height")):(this.$emit("updateSelectedImageProperties",this.selectedImageProps.height,"height"),this.$emit("updateSelectedImageProperties",e,"width"))),"height"===t?this.keepImageProportions?(this.$emit("updateSelectedImageProperties",e,"height"),this.selectedImageProps.width=Math.round(this.selectedImageProps.height*this.format),this.$emit("updateSelectedImageProperties",this.selectedImageProps.width,"width")):(this.$emit("updateSelectedImageProperties",this.selectedImageProps.width,"width"),this.$emit("updateSelectedImageProperties",e,"height")):this.$emit("updateSelectedImageProperties",e,t)},closeModal:function(){console.log("closeModal"),this.$emit("closeImagePropertiesToast",!1)}}},F=(n(293),{components:{ImagesModal:p,DocumentsModal:b,CreateLinkModal:y,ImageProperties:Object(f.a)(C,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-row",{staticClass:"justify-content-start bg-light",staticStyle:{"border-radius":"3px"},attrs:{"no-gutters":"","align-v":"center"}},[n("b-form-group",{staticClass:"mx-2",attrs:{label:"Largeur (px):","label-for":"width"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"width"},on:{update:function(t){return e.updateSelectedImage(t,"width")}},model:{value:e.selectedImageProps.width,callback:function(t){e.$set(e.selectedImageProps,"width",t)},expression:"selectedImageProps['width']"}})],1),e._v(" "),e.keepImageProportions?n("font-awesome-icon",{staticClass:"icon",attrs:{size:"1x",icon:"lock"},on:{click:function(t){e.keepImageProportions=!1}}}):n("font-awesome-icon",{staticClass:"icon",attrs:{size:"1x",icon:"lock-open"},on:{click:function(t){e.keepImageProportions=!0}}}),e._v(" "),n("b-form-group",{staticClass:"mx-2",attrs:{label:"Hauteur (px):","label-for":"height"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"height"},on:{update:function(t){return e.updateSelectedImage(t,"height")}},model:{value:e.selectedImageProps.height,callback:function(t){e.$set(e.selectedImageProps,"height",t)},expression:"selectedImageProps['height']"}})],1),e._v(" "),n("b-form-group",{staticClass:"mx-2",attrs:{label:"Marge gauche (px):","label-for":"marginLeft"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"marginLeft",value:e.selectedImageProps.style["margin-left"]},on:{update:function(t){return e.updateSelectedImage(t,"marginLeft")}}})],1),e._v(" "),n("b-form-group",{staticClass:"mx-2",attrs:{label:"Marge droite (px):","label-for":"marginRight"}},[n("b-form-input",{attrs:{type:"number",min:"0",id:"marginRight",value:e.selectedImageProps.style["margin-right"]},on:{update:function(t){return e.updateSelectedImage(t,"marginRight")}}})],1),e._v(" "),n("b-form-group",{staticClass:"mx-2",attrs:{label:"Alignement:","label-for":"float"}},[n("b-form-select",{attrs:{options:["left","right"],id:"float",value:e.selectedImageProps.style.float},on:{change:function(t){return e.updateSelectedImage(t,"float")}}})],1)],1)},[],!1,null,"1337ab33",null).exports},props:["formContent"],created:function(){},mounted:function(){this.content=this.formContent},data:function(){return{content:"",showHTML:!1,checked:!1,showImagesModal:!1,showDocumentsModal:!1,showCreateLinkModal:!1,selectedImageNode:null,selectedImageProps:{width:0,height:0,style:{}},selectedText:"",focused:!1,selRange:null}},computed:{},methods:{toggleShowHTML:function(){this.showHTML?this.content=document.getElementById("textBox").innerText:this.content=document.getElementById("textBox").innerHTML,this.showHTML=!this.showHTML,this.$emit("toggleShowHTML",this.showHTML)},selectElement:function(e){this.selectedImageNode=null,"img"===e.target.tagName.toLowerCase()&&(console.log("img!"),this.selectedImageNode=e.target,this.selectedImageProps.width=e.target.width,this.selectedImageProps.height=e.target.height,this.selectedImageProps.style["margin-left"]=e.target.style["margin-left"]?e.target.style["margin-left"].match(/\d/g).join(""):0,this.selectedImageProps.style["margin-right"]=e.target.style["margin-right"]?e.target.style["margin-right"].match(/\d/g).join(""):0,this.selectedImageProps.style.float=e.target.style.float)},updateSelectedImageProperties:function(e,t){"width"!==t&&"height"!==t||(this.selectedImageNode[t]=e),"marginLeft"===t&&(this.selectedImageNode.style.marginLeft="".concat(e,"px")),"marginRight"===t&&(this.selectedImageNode.style.marginRight="".concat(e,"px")),"float"===t&&(this.selectedImageNode.style.float=e)},openImagesModal:function(){var e=this;this.showImagesModal=!0,setTimeout(function(){e.$bvModal.show("imagesModal")},300)},openDocumentsModal:function(){var e=this;this.showDocumentsModal=!0,setTimeout(function(){e.$bvModal.show("documentsModal")},300)},openCreateLinkModal:function(){var e=this;this.selectedText=window.getSelection().toString()||"Lien",this.selRange=this.saveSelection(),this.showCreateLinkModal=!0,setTimeout(function(){e.$bvModal.show("createLinkModal")},300)},insertImage:function(e){this.showModal=!1;var t="/images/".concat(e);this.formatDoc("insertImage",t)},insertDocument:function(e,t,n){this.formatDoc("insertHTML",'<a href="/documents/'.concat(e,'" type="').concat(t,'" title="').concat(n,'" target="_blank">').concat(n,"</a>"))},insertLink:function(e){var t,n=e.linkType,r=e.linkPage;t="external"===n?'<a href="'.concat(r.external,'">').concat(this.selectedText,"</a>"):'<router-link to="/'.concat(r.internal.slug,'"><span class="link">').concat(this.selectedText,"</span></router-link>"),this.restoreSelection(this.selRange),document.getElementById("textBox").focus(),this.insertTextAtCursor(t)},formatDoc:function(e,t){document.execCommand(e,!1,t)},saveSelection:function(){var e;if(window.getSelection){if((e=window.getSelection()).getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},restoreSelection:function(e){var t;e&&(window.getSelection?((t=window.getSelection()).removeAllRanges(),t.addRange(e)):document.selection&&e.select&&e.select())},insertTextAtCursor:function(e){var t,n;if(window.getSelection){if((t=window.getSelection()).getRangeAt&&t.rangeCount){(n=t.getRangeAt(0)).deleteContents();var r=document.createElement("div");r.innerHTML=e;for(var o,a,s=document.createDocumentFragment();o=r.firstChild;)a=s.appendChild(o);n.insertNode(s),a&&((n=n.cloneRange()).setStartAfter(a),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&document.selection.createRange&&((n=document.selection.createRange()).pasteHTML(e),n.select())}}}),D=(n(295),Object(f.a)(F,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-form-group",{attrs:{label:"Contenu de la page:"}},[n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Gras"},on:{click:function(t){return t.preventDefault(),e.formatDoc("bold")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"bold"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Italic"},on:{click:function(t){return t.preventDefault(),e.formatDoc("italic")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"italic"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Souligné"},on:{click:function(t){return t.preventDefault(),e.formatDoc("underline")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"underline"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Aligner à gauche"},on:{click:function(t){return t.preventDefault(),e.formatDoc("justifyleft")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"align-left"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Aligner au centre"},on:{click:function(t){return t.preventDefault(),e.formatDoc("justifycenter")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"align-center"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"primary",title:"Aligner à droite"},on:{click:function(t){return t.preventDefault(),e.formatDoc("justifyright")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"align-right"}})],1),e._v(" "),n("b-button",{staticClass:"mx-.5",attrs:{variant:"primary",title:"Liste point"},on:{click:function(t){return t.preventDefault(),e.formatDoc("insertUnorderedList")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"list-ul"}})],1),e._v(" "),n("b-button",{staticClass:"mx-.5",attrs:{variant:"primary",title:"Liste nombre"},on:{click:function(t){return t.preventDefault(),e.formatDoc("insertOrderedList")}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"list-ol"}})],1),e._v(" "),n("b-button",{staticClass:"mx-.5",attrs:{variant:"primary",title:"Lien"},on:{click:function(t){return t.preventDefault(),e.openCreateLinkModal(t)}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"link"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"secondary",title:"Ajouter image",disabled:!e.focused},on:{mousedown:function(t){t.preventDefault(),e.focused=!0},click:function(t){return t.preventDefault(),e.openImagesModal(t)}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"image"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"secondary",title:"Ajouter PDF",disabled:!e.focused},on:{mousedown:function(t){t.preventDefault(),e.focused=!0},click:function(t){return t.preventDefault(),e.openDocumentsModal(t)}}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"file-pdf"}})],1),e._v(" "),n("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"mx-.5",attrs:{variant:"dark",title:"Voir code"},on:{click:e.toggleShowHTML}},[n("font-awesome-icon",{attrs:{size:"1x",icon:"code"}})],1),e._v(" "),e.selectedImageNode?n("b-row",{staticClass:"justify-content-center my-2",attrs:{"no-gutters":""}},[n("b-col",{attrs:{cols:"12"}},[n("image-properties",{attrs:{selectedImageProps:e.selectedImageProps},on:{updateSelectedImageProperties:e.updateSelectedImageProperties}})],1)],1):e._e(),e._v(" "),e.showHTML?n("div",{staticClass:"mt-1",attrs:{contenteditable:"true",id:"textBox"},on:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1}}},[n("pre",{},[e._v(e._s(e.content))])]):n("div",{staticClass:"mt-1",attrs:{contenteditable:"true",id:"textBox"},domProps:{innerHTML:e._s(e.content)},on:{focus:function(t){e.focused=!0},blur:function(t){e.focused=!1},click:e.selectElement}})],1),e._v(" "),e.showImagesModal?n("images-modal",{on:{insertImage:e.insertImage,closeImagesModal:function(t){e.showImagesModal=!1}}}):e._e(),e._v(" "),e.showDocumentsModal?n("documents-modal",{on:{insertDocument:e.insertDocument,closeDocumentsModal:function(t){e.showDocumentsModal=!1}}}):e._e(),e._v(" "),e.showCreateLinkModal?n("create-link-modal",{attrs:{selectedText:e.selectedText},on:{insertLink:e.insertLink,closeLinkModal:function(t){e.showCreateLinkModal=!1}}}):e._e()],1)},[],!1,null,"a2f27a72",null));t.a=D.exports}}]);