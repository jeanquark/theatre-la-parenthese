(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{298:function(n,t,e){"use strict";var r=e(54);e.n(r).a},299:function(n,t,e){(n.exports=e(6)(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\t/* >>>.table th {\n\t\tvertical-align: middle;\n\t}\n\t>>>.table td {\n\t\tvertical-align: middle;\n\t} */\n\t/* .nowrap {\n        white-space:nowrap;\n    } */\n.disabled[data-v-44d8c671]:hover {\n    \tcursor: not-allowed;\n}\n",""])},54:function(n,t,e){var r=e(299);"string"==typeof r&&(r=[[n.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(7)(r,a);r.locals&&(n.exports=r.locals)},79:function(n,t,e){"use strict";e.r(t);var r=e(0),a=e.n(r);function s(n,t,e,r,a,s,o){try{var i=n[s](o),c=i.value}catch(n){return void e(n)}i.done?t(c):Promise.resolve(c).then(r,a)}function o(n){return function(){var t=this,e=arguments;return new Promise(function(r,a){var o=n.apply(t,e);function i(n){s(o,r,a,i,c,"next",n)}function c(n){s(o,r,a,i,c,"throw",n)}i(void 0)})}}var i={middleware:["auth"],layout:"frontend",created:function(){var n=o(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(this.$store.getters["shoppingCart/shoppingCart"].length<1)){n.next=3;break}return n.next=3,this.$store.dispatch("shoppingCart/fetchShoppingCart");case 3:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),data:function(){return{fields:[{key:"seat_number",label:"N° de place",sortable:!0},{key:"table.plan.performance.date",label:"Date",sortable:!0},{key:"status",label:"Statut",sortable:!0},{key:"price",label:"Prix",sortable:!0},{key:"show_details",label:"Détails",sortable:!1},{key:"actions",label:"Actions",sortable:!1}]}},computed:{shoppingCart:function(){return this.$store.getters["shoppingCart/shoppingCart"]},totalPrice:function(){return this.shoppingCart.reduce(function(n,t){return n+(t.price||0)},0)/100}},methods:{formattedStatus:function(n){switch(n){case"confirmation_pending":return"En attente de confirmation";case"reservation_confirmed":return"Réservation confirmée";case"reservation_rejected":return"Réservation rejetée";default:return"Status non spécifié"}},deletePlanSeatReservation:function(){var n=o(a.a.mark(function n(t){var e;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.$bvModal.msgBoxConfirm("Etes-vous sûr de vouloir supprimer la  réservation de la place N° ".concat(t.seat_number,"?"),{okTitle:"OK",cancelTitle:"Annuler"});case 3:if(e=n.sent,console.log("value: ",e),!e){n.next=10;break}return console.log("deleteReservation: ",t.id),n.next=9,this.$store.dispatch("planSeats/deletePlanSeatReservation",{planSeatId:t.id});case 9:this.$noty.success("La réservation a été annulée avec succès.");case 10:n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),console.log("error: ",n.t0),this.$noty.error("Nous sommes désolés. Une erreur est survenue et l'opération n'a pas pu être complétée.");case 16:case"end":return n.stop()}},n,this,[[0,12]])}));return function(t){return n.apply(this,arguments)}}()}},c=(e(298),e(2)),l=Object(c.a)(i,function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("b-container",[e("h1",{staticClass:"text-center mb-4"},[n._v("Mon panier")]),n._v(" "),n.shoppingCart.length>0?e("b-table",{attrs:{items:n.shoppingCart,fields:n.fields,striped:"",responsive:"sm"},scopedSlots:n._u([{key:"cell(seat_number)",fn:function(t){return[e("b",{staticClass:"text-info"},[n._v(n._s(t.item.seat_number))])]}},{key:"cell(table.plan.performance.date)",fn:function(t){return[t.item.table.plan?e("span",[n._v("\n\t\t\t\t\t"+n._s(n._f("moment")(t.item.table.plan.performance.date,"dddd Do MMM YYYY HH:mm"))+"\n\t\t\t\t")]):n._e()]}},{key:"cell(status)",fn:function(t){return[n._v("\n\t\t        "+n._s(n.formattedStatus(t.item.status))+"\n\t\t    ")]}},{key:"cell(price)",fn:function(t){return[n._v("\n\t\t    \t"+n._s(parseInt(t.item.price)/100)+" CHF\n\t\t    ")]}},{key:"cell(actions)",fn:function(t){return[e("b-button",{attrs:{size:"sm",variant:"danger",disabled:"confirmation_pending"!==t.item.status},on:{click:function(e){return n.deletePlanSeatReservation(t.item)}}},[n._v("Supprimer")])]}},{key:"cell(show_details)",fn:function(t){return[e("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:t.toggleDetails}},[n._v("\n\t\t\t\t\t"+n._s(t.detailsShowing?"Cacher":"Montrer")+" détails\n\t\t\t\t")])]}},{key:"row-details",fn:function(t){return[e("b-card",[e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[e("b",[n._v("Nom et Prénom:")])]),n._v(" "),e("b-col",[n._v(n._s(t.item.user.lastname)+" "+n._s(t.item.user.firstname))])],1),n._v(" "),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[e("b",[n._v("Spectacle:")])]),n._v(" "),e("b-col",[n._v(n._s(t.item.table.plan.performance.name))])],1),n._v(" "),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[e("b",[n._v("Lieu:")])]),n._v(" "),e("b-col",[n._v(n._s(t.item.table.plan.performance.location))])],1),n._v(" "),e("b-row",{staticClass:"mb-2"},[e("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[e("b",[n._v("Dernière modification:")])]),n._v(" "),e("b-col",[n._v(n._s(n._f("moment")(t.item.updated_at,"from","now")))])],1),n._v(" "),e("b-row",{staticClass:"justify-content-center mb-2"},[e("b-button",{attrs:{size:"sm"},on:{click:t.toggleDetails}},[n._v("Cacher détails")])],1)],1)]}}],null,!1,3314307552)},[n._v(" "),n._v(" "),n._v(" "),n._v(" "),n._v(" "),n._v(" "),e("template",{slot:"bottom-row"},[e("td",{attrs:{colspan:"3"}},[e("b",[n._v("Total restant à payer")])]),n._v(" "),e("td",[e("b",[n._v(n._s(n.totalPrice)+" CHF")])]),n._v(" "),e("td",{attrs:{colspan:"2"}})])],2):e("b-alert",{attrs:{show:"",variant:"info"}},[n._v("Aucune réservation effectuée pour le moment.")]),n._v(" "),e("br"),e("br"),n._v(" "),e("b-row",{staticClass:"justify-content-center my-2"},[e("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"20rem"},attrs:{title:"Nos coordonnées bancaires:",tag:"article"}},[e("b-card-text",[e("p",[n._v("\n\t\t\t\t\t\tThéatre la parenthèse"),e("br"),n._v("\n\t\t\t\t\t\tCompte postal: 01-23456-78"),e("br"),n._v("\n\t\t\t\t\t\tIBAN: CH 1234 5678 9012 3456\n\t\t\t\t\t")])])],1)],1)],1)},[],!1,null,"44d8c671",null);t.default=l.exports}}]);