(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{105:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(11),s=n.n(a);n(15);function c(e,t,n,r,o,a,s){try{var c=e[a](s),i=c.value}catch(e){return void n(e)}c.done?t(i):Promise.resolve(i).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){c(a,r,o,s,i,"next",e)}function i(e){c(a,r,o,s,i,"throw",e)}s(void 0)})}}var l={components:{VueCtkDateTimePicker:s.a},created:function(){var e=i(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.$store.getters["members/members"].length<1)){e.next=3;break}return e.next=3,this.$store.dispatch("members/fetchMembers");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{newShow:{name:"ABC",start_date:"2020-02-25",end_date:"2020-02-26",season:"2020",is_active:!1,members:[]}}},computed:{loading:function(){return this.$store.getters["loading/loading"]},members:function(){return this.$store.getters["members/members"]}},methods:{addNewShow:function(){var e=i(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("addNewShow: ",this.newShow),this.$store.commit("loading/SET_LOADING",!0),e.next=5,this.$store.dispatch("shows/createShow",{newShow:this.newShow});case 5:this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Nouveau spectacle créé avec succès."),this.$router.push("/admin/shows"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),this.$store.commit("loading/SET_LOADING",!1),this.$noty.error("Une erreur est survenue et le nouveau spectacle n'a pas pu être crée.");case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}()}},u=n(2),m=Object(u.a)(l,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-container",[n("b-breadcrumb",[n("b-breadcrumb-item",{staticClass:"navigation",attrs:{to:"/admin/shows"}},[n("font-awesome-icon",{attrs:{icon:"theater-masks"}}),e._v(" "),n("span",[e._v("Spectacles")])],1),e._v(" "),n("b-breadcrumb-item",{attrs:{active:""}},[e._v("Créer")])],1),e._v(" "),n("h2",{staticClass:"text-center"},[e._v("Créer nouveau spectacle")]),e._v(" "),n("b-form",{on:{submit:function(t){return t.preventDefault(),e.addNewShow(t)}}},[n("b-row",{staticClass:"justify-content-start my-3 px-3"},[n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Entrer un nom pour ce spectacle:","label-for":"newShowName"}},[n("b-form-input",{attrs:{id:"newShowName",placeholder:"Nom du spectacle"},model:{value:e.newShow.name,callback:function(t){e.$set(e.newShow,"name",t)},expression:"newShow.name"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Saison:","label-for":"newShowSeason"}},[n("b-form-input",{attrs:{type:"number",id:"newShowSeason",placeholder:"2020"},model:{value:e.newShow.season,callback:function(t){e.$set(e.newShow,"season",t)},expression:"newShow.season"}})],1)],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-start my-3 px-3",attrs:{"align-v":"center"}},[n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Entrer une date de début:","label-for":"newShowStartDate"}},[n("VueCtkDateTimePicker",{attrs:{label:"Cliquer pour choisir une date",format:"YYYY-MM-DD",formatted:"YYYY-MM-DD",color:"#9ACD32","button-color":"#9ACD32","button-now-translation":"Aujourd'hui","only-date":"",id:"newShowStartDate"},model:{value:e.newShow.start_date,callback:function(t){e.$set(e.newShow,"start_date",t)},expression:"newShow.start_date"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Entrer une date de fin:","label-for":"newShowEndDate"}},[n("VueCtkDateTimePicker",{attrs:{label:"Cliquer pour choisir une date",format:"YYYY-MM-DD",formatted:"YYYY-MM-DD",color:"#9ACD32","button-color":"#9ACD32","button-now-translation":"Aujourd'hui","only-date":"",id:"newShowEndDate"},model:{value:e.newShow.end_date,callback:function(t){e.$set(e.newShow,"end_date",t)},expression:"newShow.end_date"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-group",{attrs:{label:"Sélectionner les membres:","label-for":"newShowMembers"}},[n("b-form-select",{attrs:{id:"newShowMembers",multiple:"",options:e.members,"value-field":"id","text-field":"firstname"},model:{value:e.newShow.members,callback:function(t){e.$set(e.newShow,"members",t)},expression:"newShow.members"}})],1)],1),e._v(" "),n("b-col",{attrs:{cols:"12",md:"6"}},[n("b-form-checkbox",{attrs:{id:"newShowIsActive"},model:{value:e.newShow.is_active,callback:function(t){e.$set(e.newShow,"is_active",t)},expression:"newShow.is_active"}},[e._v("\n\t\t\t\t\t\tLe spectacle est "+e._s(e.newShow.is_active?"actif":"inactif")+"\n\t\t\t\t\t")])],1)],1),e._v(" "),n("b-row",{staticClass:"justify-content-center my-2"},[n("b-button",{attrs:{variant:"primary",type:"submit",disabled:e.loading}},[e.loading?n("b-spinner",{attrs:{small:"",type:"grow"}}):e._e(),e._v("\n                \tCréer le spectacle\n                ")],1),n("br")],1)],1)],1)},[],!1,null,"3727eb0e",null);t.default=m.exports}}]);