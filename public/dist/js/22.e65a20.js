(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{123:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),s=r(258),a=r.n(s),i=r(11),u=r.n(i);r(16);function c(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var s=e.apply(t,r);function a(e){c(s,n,o,a,i,"next",e)}function i(e){c(s,n,o,a,i,"throw",e)}a(void 0)})}}var f={components:{VueCtkDateTimePicker:u.a},created:function(){var e=l(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.$store.getters["performances/performances"][this.$route.params.id]){e.next=3;break}return e.next=3,this.$store.dispatch("performances/fetchPerformanceById",{performanceId:this.$route.params.id});case 3:this.form.fill(this.performance);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),mounted:function(){var e=l(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),data:function(){return{form:new a.a({id:"",name:"",location:"",date:""})}},computed:{loading:function(){return this.$store.getters["loading/loading"]},performances:function(){return this.$store.getters["performances/performances"]},performance:function(){return this.performances[this.$route.params.id]}},methods:{updatePerformance:function(){var e=l(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("updatePerformance: ",this.form),this.$store.commit("loading/SET_LOADING",!0),console.log("this.form: ",this.form),e.next=6,this.$store.dispatch("performances/updatePerformance",this.form);case 6:this.$store.commit("loading/SET_LOADING",!1),this.$noty.success("Page mise à jour avec succès!"),this.$router.push("/admin/performances"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),this.$store.commit("loading/SET_LOADING",!1),console.log("error: ",e.t0),this.$noty.error("Une erreur est survenue et la représentation n'a pas pu être mise à jour.");case 16:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()}},m=(r(306),r(2)),p=Object(m.a)(f,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-container",[r("b-breadcrumb",[r("b-breadcrumb-item",{staticClass:"navigation",attrs:{to:"/admin/performances"}},[r("font-awesome-icon",{attrs:{icon:"calendar-day"}}),e._v(" "),r("span",[e._v("Représentations")])],1),e._v(" "),r("b-breadcrumb-item",{attrs:{active:""}},[e._v("Editer")])],1),e._v(" "),r("h2",{staticClass:"text-center"},[e._v("\n            Editer représentation "),e.performance?r("span",{staticClass:"primary-color"},[e._v(e._s(e.performance.name))]):e._e()]),e._v(" "),r("b-form",{on:{submit:function(t){return t.preventDefault(),e.updatePerformance(t)}}},[r("b-row",{attrs:{"no-gutters":""}},[r("b-col",{staticClass:"px-2",attrs:{cols:"12",md:"6"}},[r("b-form-group",{attrs:{label:"Nom:","label-for":"name"}},[r("b-form-input",{class:{"is-invalid":e.form.errors.has("name")},attrs:{id:"name",name:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"name"}})],1)],1),e._v(" "),r("b-col",{staticClass:"px-2",attrs:{cols:"12",md:"6"}},[r("b-form-group",{attrs:{label:"Lieu:","label-for":"location"}},[r("b-form-input",{class:{"is-invalid":e.form.errors.has("location")},attrs:{id:"location",location:"location"},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}}),e._v(" "),r("has-error",{attrs:{form:e.form,field:"location"}})],1)],1),e._v(" "),r("b-col",{staticClass:"px-2",attrs:{cols:"12",md:"6"}},[r("b-form-group",{attrs:{label:"Date:","label-for":"date"}},[r("VueCtkDateTimePicker",{attrs:{label:"Cliquer pour choisir une date",format:"YYYY-MM-DD HH:mm",formatted:"YYYY-MM-DD HH:mm",color:"#9ACD32","button-color":"#9ACD32","button-now-translation":"Aujourd'hui",id:"newPerformanceDate"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1)],1),e._v(" "),r("b-row",{staticClass:"justify-content-center my-2"},[r("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.loading}},[e.loading?r("b-spinner",{attrs:{small:"",type:"grow"}}):e._e(),e._v("\n                    Editer le contenu\n                ")],1)],1),e._v(" "),r("b-row",{staticClass:"justify-content-center"},[r("b-alert",{attrs:{variant:"danger",dismissible:"",show:e.form.errors.any()}},[e._v("Erreur lors de l'envoi. Veuillez vérifier la validité des champs.")])],1)],1)],1)},[],!1,null,"ccc0d2fa",null);t.default=p.exports},258:function(e,t,r){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./",r(r.s=0)}({0:function(e,t,r){e.exports=r("lVK7")},OMN4:function(e,t){e.exports=r(3)},lVK7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("OMN4"),o=r.n(n);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){if(null===e||"object"!==s(e))return e;var t=Array.isArray(e)?[]:{};return Object.keys(e).forEach(function(r){t[r]=a(e[r])}),t}function i(e){return Array.isArray(e)?e:[e]}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,n;return t=e,(r=[{key:"set",value:function(e,t){var r,n,o;"object"===c(e)?this.errors=e:this.set(u({},this.errors,(r={},n=e,o=i(t),n in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r)))}},{key:"all",value:function(){return this.errors}},{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"hasAny",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.some(function(t){return e.has(t)})}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.has(e))return this.getAll(e)[0]}},{key:"getAll",value:function(e){return i(this.errors[e]||[])}},{key:"only",value:function(){for(var e=this,t=[],r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return n.forEach(function(r){var n=e.get(r);n&&t.push(n)}),t}},{key:"flatten",value:function(){return Object.values(this.errors).reduce(function(e,t){return e.concat(t)},[])}},{key:"clear",value:function(e){var t=this,r={};e&&Object.keys(this.errors).forEach(function(n){n!==e&&(r[n]=t.errors[n])}),this.set(r)}}])&&l(t.prototype,r),n&&l(t,n),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.busy=!1,this.successful=!1,this.errors=new f,this.originalData=a(t),Object.assign(this,t)}var t,r,n;return t=e,(r=[{key:"fill",value:function(e){var t=this;this.keys().forEach(function(r){t[r]=e[r]})}},{key:"data",value:function(){var e=this;return this.keys().reduce(function(t,r){return p({},t,function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,e[r]))},{})}},{key:"keys",value:function(){return Object.keys(this).filter(function(t){return!e.ignore.includes(t)})}},{key:"startProcessing",value:function(){this.errors.clear(),this.busy=!0,this.successful=!1}},{key:"finishProcessing",value:function(){this.busy=!1,this.successful=!0}},{key:"clear",value:function(){this.errors.clear(),this.successful=!1}},{key:"reset",value:function(){var t=this;Object.keys(this).filter(function(t){return!e.ignore.includes(t)}).forEach(function(e){t[e]=a(t.originalData[e])})}},{key:"get",value:function(e){return this.submit("get",e)}},{key:"post",value:function(e){return this.submit("post",e)}},{key:"patch",value:function(e){return this.submit("patch",e)}},{key:"put",value:function(e){return this.submit("put",e)}},{key:"delete",value:function(e){return this.submit("delete",e)}},{key:"submit",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.startProcessing();var s="get"===e?{params:this.data()}:this.data();return new Promise(function(a,i){o.a.request(p({url:r.route(t),method:e,data:s},n)).then(function(e){r.finishProcessing(),a(e)}).catch(function(e){r.busy=!1,e.response&&r.errors.set(r.extractErrors(e.response)),i(e)})})}},{key:"extractErrors",value:function(t){return t.data&&"object"===m(t.data)?t.data.errors?p({},t.data.errors):t.data.message?{error:t.data.message}:p({},t.data):{error:e.errorMessage}}},{key:"route",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return e.routes.hasOwnProperty(t)&&(n=decodeURI(e.routes[t])),"object"!==m(r)&&(r={id:r}),Object.keys(r).forEach(function(e){n=n.replace("{".concat(e,"}"),r[e])}),n}},{key:"onKeydown",value:function(e){e.target.name&&this.errors.clear(e.target.name)}}])&&d(t.prototype,r),n&&d(t,n),e}();h.routes={},h.errorMessage="Something went wrong. Please try again.",h.ignore=["busy","successful","errors","originalData"];var v=h;function y(e,t,r,n,o,s,a,i){var u=typeof(e=e||{}).default;"object"!==u&&"function"!==u||(e=e.default);var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=r,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId=s),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=i?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var f=l.render;l.render=function(e,t){return c.call(t),f(e,t)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,c):[c]}return{exports:e,options:l}}var b=y({name:"has-error",props:{form:{type:Object,required:!0},field:{type:String,required:!0}}},function(){var e=this.$createElement,t=this._self._c||e;return this.form.errors.has(this.field)?t("div",{staticClass:"help-block invalid-feedback",domProps:{innerHTML:this._s(this.form.errors.get(this.field))}}):this._e()},[],!1,null,null,null).exports,g={props:{form:{type:Object,required:!0},dismissible:{type:Boolean,default:!0}},methods:{dismiss:function(){this.dismissible&&this.form.clear()}}},_=y({name:"alert-error",extends:g,props:{message:{type:String,default:"There were some problems with your input."}}},function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.form.errors.any()?r("div",{staticClass:"alert alert-danger alert-dismissible",attrs:{role:"alert"}},[e.dismissible?r("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.dismiss}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]):e._e(),e._v(" "),e._t("default",[e.form.errors.has("error")?r("div",{domProps:{innerHTML:e._s(e.form.errors.get("error"))}}):r("div",{domProps:{innerHTML:e._s(e.message)}})])],2):e._e()},[],!1,null,null,null).exports,k=y({name:"alert-errors",extends:g,props:{message:{type:String,default:"There were some problems with your input."}}},function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.form.errors.any()?r("div",{staticClass:"alert alert-danger alert-dismissible",attrs:{role:"alert"}},[e.dismissible?r("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.dismiss}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]):e._e(),e._v(" "),e.message?r("div",{domProps:{innerHTML:e._s(e.message)}}):e._e(),e._v(" "),r("ul",e._l(e.form.errors.flatten(),function(t){return r("li",{domProps:{innerHTML:e._s(t)}})}))]):e._e()},[],!1,null,null,null).exports,w=y({name:"alert-success",extends:g,props:{message:{type:String,default:""}}},function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.form.successful?r("div",{staticClass:"alert alert-success alert-dismissible",attrs:{role:"alert"}},[e.dismissible?r("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:e.dismiss}},[r("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])]):e._e(),e._v(" "),e._t("default",[r("div",{domProps:{innerHTML:e._s(e.message)}})])],2):e._e()},[],!1,null,null,null).exports;r.d(t,"Form",function(){return v}),r.d(t,"Errors",function(){return f}),r.d(t,"HasError",function(){return b}),r.d(t,"AlertError",function(){return _}),r.d(t,"AlertErrors",function(){return k}),r.d(t,"AlertSuccess",function(){return w}),r.d(t,"default",function(){return v})}})},306:function(e,t,r){"use strict";var n=r(53);r.n(n).a},307:function(e,t,r){(e.exports=r(6)(!1)).push([e.i,".primary-color[data-v-ccc0d2fa] {\n  color: #9ACD32;\n}",""])},53:function(e,t,r){var n=r(307);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(7)(n,o);n.locals&&(e.exports=n.locals)}}]);